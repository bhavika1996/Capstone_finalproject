<html>
    <head>
        <title>
            Capstone
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
    </head>
    <body>
        
    <canvas id="regionPie" style="float: left; width:100%; max-width: 720px; margin-top: 60px;"></canvas>
    <canvas id="occupationDoughnut" style="float: left; width: 100%; max-width: 720px; margin-top: 60px;"></canvas>
    <canvas id="ageBar" style="float: left; max-width: 100%; margin-top: 60px; padding: 0px 60px 60px 60px;"></canvas>
    <canvas id="weekLine" style="float: left; max-width: 100%; margin-top: 60px; padding: 0px 60px 60px 60px;"></canvas>
    
    <script>  
    
        var regions = ["Alantic", "Quebec", "Ontario & Nunavat", "Prairies", "British Columbia"];
        var region_mortality = {{ region_mortality|safe }};        

        var ageGroups = ["0 to 19 Years", "20 to 29 Years", "30 to 39 Years", "40 to 49 Years", "50 to 59 Years", "60 to 69 Years", "70 to 79 Years", "80 Years or older"];
        var age_mortality = {{ age_mortality|safe }};

        var occupation = ["Health care worker", "School or daycare worker/attendee", "Long term resident", "Other"];
        var occupation_mortality = {{ occupation_mortality|safe }};
        
        var week_death = {{ week_death|safe }};        
        var week_confirmed = {{ week_confirmed|safe }};
        var week = [];
        for(var i=1; i <= 52; i++){
            week.push(i);
        }        
        
        var barColors = ["#f58742", "#42f548", "#42a4f5", "#ff4d4d", "#6699cc", "#ff4d94", "#2b5797", "#b91d47"]
        
        // Pie Chart
        new Chart("regionPie", {
            type: "pie",
            data: {
                labels: regions,
                datasets: [{
                   backgroundColor: barColors,
                    data: region_mortality
                }]
            },
            options: {
                title: {
                display: true,
                text: "Provincial Mortality"
                }
            }
        });

         // Bar Graph
         new Chart("ageBar", {
            type: "bar",
            data: {
                labels: ageGroups,
                datasets: [{
                   backgroundColor: barColors,
                    data: age_mortality
                }]
            },
            options: {
                title: {
                display: true,
                text: "Age Groups' Mortality"
                }
            }
        });

        //Line Graph
        new Chart("weekLine", {
            type: "line",
            data: {
                labels: week,
                datasets: [{ 
                    data: week_confirmed,
                    borderColor: "blue",
                    fill: false
                }, 
                { 
                    data: week_death,
                    borderColor: "red",
                    fill: false
                }]
            },
            options: {
                title: {
                display: true,
                text: "Confirmed Cases and Deaths per Week"
                }
            }
        });

        //Doughnut graph
        new Chart("occupationDoughnut", {
            type: "doughnut",
            data: {
                labels: occupation,
                datasets: [{
                   backgroundColor: barColors,
                    data: occupation_mortality
                }]
            },
            options: {
                title: {
                display: true,
                text: "Occupation Mortality"
                }
            }
        });

        
    </script>
    </body>
</html>